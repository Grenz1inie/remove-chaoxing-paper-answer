# ä»£ç ç»“æ„è¯´æ˜

æœ¬é¡¹ç›®é‡‡ç”¨**å•æ–‡ä»¶å¤šæ¨¡å—æ¶æ„**ï¼ˆSingle-File Multi-Module Architectureï¼‰ï¼Œå°†æ‰€æœ‰ä»£ç ç»„ç»‡åœ¨ `main.user.js` ä¸€ä¸ªç‰©ç†æ–‡ä»¶ä¸­ï¼Œä½†é€šè¿‡ç±»å’Œæ¨¡å—åŒ–æ³¨é‡Šå®ç°äº†æ¸…æ™°çš„é€»è¾‘åˆ†ç¦»ã€‚

## ğŸ“ è™šæ‹Ÿç›®å½•ç»“æ„

å¦‚æœå°†æœ¬é¡¹ç›®æ‹†åˆ†ä¸ºå¤šæ–‡ä»¶ç»“æ„ï¼Œå…¶ç»„ç»‡å½¢å¼å¦‚ä¸‹ï¼š

```
main.user.js
â”‚
â”œâ”€â”€ ğŸ“„ userscript-header                        # Tampermonkey è„šæœ¬å¤´éƒ¨å£°æ˜
â”‚   â””â”€â”€ @name, @version, @match, @grant ç­‰
â”‚
â”œâ”€â”€ ğŸ“¦ config/                                  # é…ç½®ç®¡ç†å±‚
â”‚   â””â”€â”€ Config.js                               # é…ç½®ç®¡ç†ç±» (é™æ€é…ç½® + åŠ¨æ€è·å–)
â”‚       â”œâ”€â”€ selectors                           # DOM é€‰æ‹©å™¨é…ç½®
â”‚       â”‚   â”œâ”€â”€ answerBlock                     # ç­”æ¡ˆå—é€‰æ‹©å™¨
â”‚       â”‚   â”œâ”€â”€ container                       # é¢˜ç›®å®¹å™¨é€‰æ‹©å™¨
â”‚       â”‚   â”œâ”€â”€ questionItem                    # é¢˜ç›®é¡¹é€‰æ‹©å™¨
â”‚       â”‚   â””â”€â”€ sidePanel                       # ä¾§è¾¹æ é€‰æ‹©å™¨
â”‚       â”œâ”€â”€ delays                              # å»¶è¿Ÿé…ç½®
â”‚       â”œâ”€â”€ copyButton                          # å¤åˆ¶é¢˜ç›®æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ answerButton                        # å•ä¸ªç­”æ¡ˆæ§åˆ¶æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ noteButton                          # ç¬”è®°æ§åˆ¶æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ saveNoteButton                      # ä¿å­˜ç¬”è®°æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ editModeButton                      # ç¼–è¾‘æ¨¡å¼åˆ‡æ¢æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ globalButton                        # å…¨å±€æ§åˆ¶æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ noteEditor                          # ç¬”è®°ç¼–è¾‘å™¨é…ç½®
â”‚       â”œâ”€â”€ settings (userSettings)             # ç”¨æˆ·è®¾ç½®é»˜è®¤å€¼
â”‚       â”œâ”€â”€ controlPanelButton                  # æ§åˆ¶é¢æ¿æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ exportButton                        # å¯¼å‡ºè¯•é¢˜æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ controlPanelSaveButton              # æ§åˆ¶é¢æ¿ä¿å­˜æŒ‰é’®é…ç½®
â”‚       â”œâ”€â”€ exportSettings                      # å¯¼å‡ºè®¾ç½®é…ç½®
â”‚       â”œâ”€â”€ database                            # æ•°æ®åº“é…ç½®
â”‚       â””â”€â”€ messages                            # æç¤ºæ¶ˆæ¯é…ç½®
â”‚
â”œâ”€â”€ ğŸ“¦ utils/                                   # å·¥å…·ç±»å±‚
â”‚   â”œâ”€â”€ Logger.js                               # æ—¥å¿—ç®¡ç†ç±»
â”‚   â”‚   â”œâ”€â”€ log()                               # é€šç”¨æ—¥å¿—
â”‚   â”‚   â”œâ”€â”€ success()                           # æˆåŠŸæ—¥å¿—
â”‚   â”‚   â””â”€â”€ error()                             # é”™è¯¯æ—¥å¿—
â”‚   â”‚
â”‚   â”œâ”€â”€ URLParser.js                            # URL è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ parseWorkInfo()                     # è§£æä½œä¸šä¿¡æ¯
â”‚   â”‚   â””â”€â”€ getWorkKey()                        # è·å–ä½œä¸šå”¯ä¸€æ ‡è¯†
â”‚   â”‚
â”‚   â””â”€â”€ DOMHelper.js                            # DOM å·¥å…·ç±»
â”‚       â”œâ”€â”€ createElement()                     # åˆ›å»ºå…ƒç´ 
â”‚       â”œâ”€â”€ insertElement()                     # æ’å…¥å…ƒç´ 
â”‚       â”œâ”€â”€ removeElement()                     # ç§»é™¤å…ƒç´ 
â”‚       â””â”€â”€ ensureRelativePosition()            # ç¡®ä¿ç›¸å¯¹å®šä½
â”‚
â”œâ”€â”€ ğŸ“¦ database/                                # æ•°æ®æŒä¹…åŒ–å±‚
â”‚   â””â”€â”€ DatabaseManager.js                      # IndexedDB ç®¡ç†å™¨
â”‚       â”œâ”€â”€ init()                              # åˆå§‹åŒ–æ•°æ®åº“
â”‚       â”œâ”€â”€ saveNote()                          # ä¿å­˜ç¬”è®°
â”‚       â”œâ”€â”€ getNote()                           # è·å–ç¬”è®°
â”‚       â”œâ”€â”€ getAllDomainNotes()                 # è·å–æ‰€æœ‰ç¬”è®°
â”‚       â”œâ”€â”€ deleteNote()                        # åˆ é™¤ç¬”è®°
â”‚       â”œâ”€â”€ getSetting()                        # è·å–è®¾ç½®
â”‚       â”œâ”€â”€ saveSetting()                       # ä¿å­˜è®¾ç½®
â”‚       â”œâ”€â”€ getAllSettings()                    # è·å–æ‰€æœ‰è®¾ç½®
â”‚       â””â”€â”€ getStyles() / saveStyles()          # æ ·å¼é…ç½®å­˜å–
â”‚
â”œâ”€â”€ ğŸ“¦ styles/                                  # æ ·å¼ç®¡ç†å±‚
â”‚   â””â”€â”€ StyleGenerator.js                       # æ ·å¼ç”Ÿæˆå™¨
â”‚       â”œâ”€â”€ _getInlineButtonStyle()             # é€šç”¨å†…è”æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ _getFloatingButtonStyle()           # é€šç”¨æµ®åŠ¨æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ _getCopyButtonStyle()               # å¤åˆ¶æŒ‰é’®æ ·å¼ï¼ˆç§æœ‰ï¼‰
â”‚       â”œâ”€â”€ getAnswerButtonStyle()              # ç­”æ¡ˆæŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ getNoteButtonStyle()                # ç¬”è®°æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ getSaveNoteButtonStyle()            # ä¿å­˜æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ getEditModeButtonStyle()            # ç¼–è¾‘æ¨¡å¼æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ getGlobalButtonStyle()              # å…¨å±€æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ getCopyButtonStyle()                # å¤åˆ¶æŒ‰é’®æ ·å¼
â”‚       â”œâ”€â”€ addHoverEffect()                    # æ·»åŠ æ‚¬åœæ•ˆæœ
â”‚       â””â”€â”€ getNoteEditorStyle()                # ç¼–è¾‘å™¨æ ·å¼
â”‚
â”œâ”€â”€ ğŸ“¦ components/                              # UI ç»„ä»¶å±‚
â”‚   â”œâ”€â”€ NoteEditor.js                           # ç¬”è®°ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ create()                            # åˆ›å»ºç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ _createToolbar()                    # åˆ›å»ºå·¥å…·æ  (16ä¸ªæ ¼å¼æŒ‰é’®)
â”‚   â”‚   â”œâ”€â”€ _addToolbarButton()                 # æ·»åŠ å·¥å…·æ æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ execCommand()                       # æ‰§è¡Œç¼–è¾‘å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ setEditMode()                       # åˆ‡æ¢ç¼–è¾‘/é¢„è§ˆæ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ loadContent()                       # åŠ è½½å†…å®¹
â”‚   â”‚   â”œâ”€â”€ saveContent()                       # ä¿å­˜å†…å®¹
â”‚   â”‚   â”œâ”€â”€ toggle()                            # åˆ‡æ¢æ˜¾ç¤º/éšè—
â”‚   â”‚   â””â”€â”€ getElement()                        # è·å– DOM å…ƒç´ 
â”‚   â”‚
â”‚   â””â”€â”€ ControlPanelUI.js                       # æ§åˆ¶é¢æ¿ UI ç»„ä»¶
â”‚       â”œâ”€â”€ show()                              # æ˜¾ç¤ºé¢æ¿
â”‚       â”œâ”€â”€ _close()                            # å…³é—­é¢æ¿
â”‚       â”œâ”€â”€ _loadSettings()                     # åŠ è½½è®¾ç½®
â”‚       â”œâ”€â”€ _loadNotes()                        # åŠ è½½ç¬”è®°åˆ—è¡¨
â”‚       â”œâ”€â”€ _createModal()                      # åˆ›å»ºæ¨¡æ€æ¡†
â”‚       â”œâ”€â”€ _createHeader()                     # åˆ›å»ºå¤´éƒ¨
â”‚       â”œâ”€â”€ _createTabs()                       # åˆ›å»ºé€‰é¡¹å¡
â”‚       â”œâ”€â”€ _createSettingsTab()                # è®¾ç½®é€‰é¡¹å¡
â”‚       â”œâ”€â”€ _createNotesTab()                   # ç¬”è®°ç®¡ç†é€‰é¡¹å¡
â”‚       â”œâ”€â”€ _createStylesTab()                  # æ ·å¼è®¾ç½®é€‰é¡¹å¡
â”‚       â”œâ”€â”€ _renderContent()                    # æ¸²æŸ“å†…å®¹
â”‚       â”œâ”€â”€ _deleteSelectedNotes()              # åˆ é™¤é€‰ä¸­ç¬”è®°
â”‚       â”œâ”€â”€ _exportSelectedNotes()              # å¯¼å‡ºé€‰ä¸­ç¬”è®°
â”‚       â””â”€â”€ _exportToWord()                     # å¯¼å‡ºä¸º Word æ–‡æ¡£
â”‚
â”œâ”€â”€ ğŸ“¦ controllers/                             # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ AnswerBlockController.js                # ç­”æ¡ˆå—æ§åˆ¶å™¨ (å•é¢˜æ§åˆ¶)
â”‚   â”‚   â”œâ”€â”€ initialize()                        # åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ _extractQuestionId()                # æå–é¢˜ç›®ID
â”‚   â”‚   â”œâ”€â”€ _hideBlockInitial()                 # åˆå§‹éšè—ç­”æ¡ˆ
â”‚   â”‚   â”œâ”€â”€ _createButtons()                    # åˆ›å»ºæŒ‰é’®å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ _createCopyButton()                 # åˆ›å»ºå¤åˆ¶é¢˜ç›®æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ _createAnswerToggleButton()         # åˆ›å»ºç­”æ¡ˆåˆ‡æ¢æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ _createNoteToggleButton()           # åˆ›å»ºç¬”è®°æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ _createEditModeToggleButton()       # åˆ›å»ºç¼–è¾‘æ¨¡å¼æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ _createSaveNoteButton()             # åˆ›å»ºä¿å­˜ç¬”è®°æŒ‰é’®
â”‚   â”‚   â”œâ”€â”€ _createNoteEditor()                 # åˆ›å»ºç¬”è®°ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ _getQuestionText()                  # è·å–é¢˜ç›®æ–‡æœ¬
â”‚   â”‚   â”œâ”€â”€ _handleCopyQuestion()               # å¤„ç†å¤åˆ¶é¢˜ç›®
â”‚   â”‚   â”œâ”€â”€ _handleAnswerToggle()               # å¤„ç†ç­”æ¡ˆåˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ toggle()                            # åˆ‡æ¢ç­”æ¡ˆæ˜¾ç¤ºçŠ¶æ€
â”‚   â”‚   â””â”€â”€ getState()                          # è·å–å½“å‰çŠ¶æ€
â”‚   â”‚
â”‚   â””â”€â”€ GlobalController.js                     # å…¨å±€æ§åˆ¶å™¨ (å…¨å±€åŠŸèƒ½)
â”‚       â”œâ”€â”€ initialize()                        # åˆå§‹åŒ–
â”‚       â”œâ”€â”€ _createButtonContainer()            # åˆ›å»ºæŒ‰é’®å®¹å™¨(å“åº”å¼)
â”‚       â”œâ”€â”€ _createManageButton()               # åˆ›å»ºæ§åˆ¶é¢æ¿æŒ‰é’®
â”‚       â”œâ”€â”€ _createGlobalButton()               # åˆ›å»ºå…¨å±€æ˜¾ç¤º/éšè—æŒ‰é’®
â”‚       â”œâ”€â”€ _createExportButton()               # åˆ›å»ºå¯¼å‡ºæŒ‰é’®
â”‚       â”œâ”€â”€ _exportAllQuestions()               # å¯¼å‡ºæ‰€æœ‰è¯•é¢˜
â”‚       â”œâ”€â”€ _extractQuestionsWithImages()       # æå–é¢˜ç›®å’Œå›¾ç‰‡
â”‚       â”œâ”€â”€ _convertImageToBase64()             # å›¾ç‰‡è½¬ Base64
â”‚       â”œâ”€â”€ _toggleAll()                        # åˆ‡æ¢æ‰€æœ‰ç­”æ¡ˆçŠ¶æ€
â”‚       â””â”€â”€ _updateGlobalButtonState()          # æ›´æ–°æŒ‰é’®çŠ¶æ€
â”‚
â”œâ”€â”€ ğŸ“¦ app/                                     # åº”ç”¨å…¥å£å±‚
â”‚   â””â”€â”€ ChaoxingAnswerHider.js                  # ä¸»åº”ç”¨ç±»
â”‚       â”œâ”€â”€ constructor()                       # æ„é€ å‡½æ•° (åˆå§‹åŒ–ä¾èµ–)
â”‚       â”œâ”€â”€ initialize()                        # åº”ç”¨åˆå§‹åŒ–
â”‚       â”œâ”€â”€ _loadCustomStyles()                 # åŠ è½½è‡ªå®šä¹‰æ ·å¼
â”‚       â”œâ”€â”€ _waitForPageLoad()                  # ç­‰å¾…é¡µé¢åŠ è½½
â”‚       â”œâ”€â”€ _findElements()                     # æŸ¥æ‰¾ DOM å…ƒç´ 
â”‚       â”œâ”€â”€ _validateElements()                 # éªŒè¯å…ƒç´ 
â”‚       â”œâ”€â”€ _initializeAnswerBlocks()           # åˆå§‹åŒ–ç­”æ¡ˆå—
â”‚       â”œâ”€â”€ _initializeGlobalControl()          # åˆå§‹åŒ–å…¨å±€æ§åˆ¶
â”‚       â””â”€â”€ _logSuccess()                       # è®°å½•æˆåŠŸæ—¥å¿—
â”‚
â””â”€â”€ ğŸ“„ bootstrap                                # å¯åŠ¨å±‚
    â””â”€â”€ åˆ›å»º ChaoxingAnswerHider å®ä¾‹å¹¶è°ƒç”¨ initialize()
```

## ğŸ—ï¸ æ¶æ„åˆ†å±‚è¯´æ˜

### 1. é…ç½®å±‚ (Config Layer)
- **Config ç±»**: é›†ä¸­ç®¡ç†æ‰€æœ‰é…ç½®é¡¹ï¼Œæ”¯æŒè·¯å¾„å¼è®¿é—®ï¼ˆå¦‚ `config.get('answerButton.colors.showBackground')`ï¼‰
- åŒ…å« DOM é€‰æ‹©å™¨ã€æŒ‰é’®æ ·å¼ã€é¢œè‰²ä¸»é¢˜ã€æ•°æ®åº“é…ç½®ç­‰

### 2. å·¥å…·å±‚ (Utils Layer)
- **Logger**: ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡ºç®¡ç†ï¼Œå¸¦è¡¨æƒ…ç¬¦å·å‰ç¼€
- **URLParser**: URL è§£æï¼Œæå–è¯¾ç¨‹/ç­çº§/ä½œä¸š IDï¼Œç”Ÿæˆå”¯ä¸€ workKey
- **DOMHelper**: DOM æ“ä½œè¾…åŠ©æ–¹æ³•ï¼ˆåˆ›å»ºã€æ’å…¥ã€åˆ é™¤å…ƒç´ ï¼‰

### 3. æ•°æ®å±‚ (Data Layer)
- **DatabaseManager**: åŸºäº IndexedDB çš„æœ¬åœ°æŒä¹…åŒ–å­˜å‚¨
- æ”¯æŒç¬”è®°å­˜å‚¨ã€ç”¨æˆ·è®¾ç½®å­˜å‚¨ã€æ ·å¼é…ç½®å­˜å‚¨

### 4. æ ·å¼å±‚ (Styles Layer)
- **StyleGenerator**: åŠ¨æ€æ ·å¼ç”Ÿæˆå™¨
- æ ¹æ® Config é…ç½®ç”Ÿæˆå„ç±»æŒ‰é’®å’Œç»„ä»¶çš„å†…è”æ ·å¼
- æ”¯æŒæ‚¬åœæ•ˆæœç®¡ç†

### 5. ç»„ä»¶å±‚ (Components Layer)
- **NoteEditor**: å¯Œæ–‡æœ¬ç¬”è®°ç¼–è¾‘å™¨
  - 16 ä¸ªæ ¼å¼åŒ–æŒ‰é’®ï¼ˆåŠ ç²—ã€æ–œä½“ã€æ ‡é¢˜ã€åˆ—è¡¨ã€ä»£ç ç­‰ï¼‰
  - æ”¯æŒç¼–è¾‘/é¢„è§ˆæ¨¡å¼åˆ‡æ¢
- **ControlPanelUI**: æ§åˆ¶é¢æ¿æ¨¡æ€æ¡†
  - è®¾ç½®é€‰é¡¹å¡ï¼ˆè‡ªåŠ¨ä¿å­˜ç­‰ï¼‰
  - ç¬”è®°ç®¡ç†é€‰é¡¹å¡ï¼ˆæŸ¥çœ‹ã€åˆ é™¤ã€å¯¼å‡ºï¼‰
  - æ ·å¼è®¾ç½®é€‰é¡¹å¡ï¼ˆè‡ªå®šä¹‰æŒ‰é’®é¢œè‰²ç­‰ï¼‰

### 6. æ§åˆ¶å™¨å±‚ (Controllers Layer)
- **AnswerBlockController**: å•é¢˜ç­”æ¡ˆå—æ§åˆ¶
  - ç®¡ç†å•ä¸ªé¢˜ç›®çš„ç­”æ¡ˆæ˜¾ç¤º/éšè—
  - å¤åˆ¶é¢˜ç›®åŠŸèƒ½
  - ç¬”è®°ç¼–è¾‘å™¨å®ä¾‹ç®¡ç†
- **GlobalController**: å…¨å±€åŠŸèƒ½æ§åˆ¶
  - æ‰¹é‡æ˜¾ç¤º/éšè—æ‰€æœ‰ç­”æ¡ˆ
  - å¯¼å‡ºè¯•é¢˜ä¸º Word æ–‡æ¡£ï¼ˆå«å›¾ç‰‡ï¼‰
  - å“åº”å¼æŒ‰é’®å¸ƒå±€ï¼ˆæ¨ªå±/ç«–å±é€‚é…ï¼‰

### 7. åº”ç”¨å±‚ (App Layer)
- **ChaoxingAnswerHider**: ä¸»åº”ç”¨ç±»
- è´Ÿè´£ä¾èµ–æ³¨å…¥ã€ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€ç»„ä»¶åè°ƒ

## ğŸ“Š æ¨¡å—ä¾èµ–å…³ç³»

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Bootstrap     â”‚
                    â”‚   (å¯åŠ¨å…¥å£)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ ChaoxingAnswer  â”‚
                    â”‚     Hider       â”‚
                    â”‚   (ä¸»åº”ç”¨)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                   â”‚                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GlobalControllerâ”‚ â”‚AnswerBlockCtrl  â”‚ â”‚ DatabaseManager â”‚
â”‚   (å…¨å±€æ§åˆ¶)     â”‚ â”‚   (å•é¢˜æ§åˆ¶)     â”‚ â”‚   (æ•°æ®å­˜å‚¨)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚                   â”‚
         â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
         â”‚          â”‚   NoteEditor    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚          â”‚  (ç¬”è®°ç¼–è¾‘å™¨)    â”‚
         â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ControlPanelUI  â”‚
â”‚   (æ§åˆ¶é¢æ¿)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚            â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
â”‚Config â”‚ â”‚Logger â”‚  â”‚StyleGen   â”‚
â”‚(é…ç½®)  â”‚ â”‚(æ—¥å¿—)  â”‚  â”‚(æ ·å¼ç”Ÿæˆ)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                           â”‚
                     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                     â”‚ DOMHelper â”‚
                     â”‚(DOMå·¥å…·)   â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£**: æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½é¢†åŸŸ
2. **ä¾èµ–æ³¨å…¥**: é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–ï¼Œä¾¿äºæµ‹è¯•å’Œæ›¿æ¢
3. **é…ç½®é©±åŠ¨**: æ‰€æœ‰æ ·å¼å’Œè¡Œä¸ºé€šè¿‡é…ç½®ç®¡ç†ï¼Œæ˜“äºå®šåˆ¶
4. **æ¨¡å—åŒ–æ³¨é‡Š**: ä½¿ç”¨ `// ===================== æ¨¡å—å =====================` æ ‡è®°æ¨¡å—è¾¹ç•Œ

## ğŸ”„ ä¸ºä»€ä¹ˆé‡‡ç”¨å•æ–‡ä»¶æ¶æ„ï¼Ÿ

1. **Tampermonkey é™åˆ¶**: ç”¨æˆ·è„šæœ¬éœ€è¦å•æ–‡ä»¶åˆ†å‘
2. **ç®€åŒ–å®‰è£…**: ç”¨æˆ·æ— éœ€å¤„ç†å¤šæ–‡ä»¶ä¾èµ–
3. **ç‰ˆæœ¬ç®¡ç†**: å•æ–‡ä»¶ä¾¿äºç‰ˆæœ¬è¿½è¸ªå’Œå›æ»š
4. **æ€§èƒ½**: é¿å…å¤šæ¬¡ç½‘ç»œè¯·æ±‚åŠ è½½æ¨¡å—

## ğŸ“ˆ ä»£ç ç»Ÿè®¡

| æ¨¡å— | å æ¯” | è¯´æ˜ |
|------|------|------|
| Config | ~8% | é…ç½®ç®¡ç† |
| Utils (Logger + URLParser + DOMHelper) | ~2% | å·¥å…·ç±» |
| DatabaseManager | ~6% | æ•°æ®æŒä¹…åŒ– |
| NoteEditor | ~9% | ç¬”è®°ç¼–è¾‘å™¨ç»„ä»¶ |
| ControlPanelUI | ~43% | æ§åˆ¶é¢æ¿ï¼ˆæœ€å¤§æ¨¡å—ï¼‰ |
| StyleGenerator | ~4% | æ ·å¼ç”Ÿæˆ |
| AnswerBlockController | ~9% | å•é¢˜æ§åˆ¶å™¨ |
| GlobalController | ~17% | å…¨å±€æ§åˆ¶å™¨ |
| ChaoxingAnswerHider | ~2% | ä¸»åº”ç”¨ç±» |
| **æ€»è®¡** | **100%** | **~5250 è¡Œ** |
